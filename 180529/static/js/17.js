webpackJsonp([17],{DNb6:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.el-cardheader[data-v-055f1f72] {\n  position: relative;\n}\n.el-cardheader .el-button[data-v-055f1f72] {\n    position: absolute;\n    right: 0;\n    top: -8px;\n}\n.shopbox[data-v-055f1f72] {\n  border: 1px solid #e6e5e5;\n  padding: 5px 10px;\n  width: 300px;\n}\n",""])},DPN0:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("gyMJ"),i=e("0xDb"),n={data:function(){return{activityId:"",activityType:1,activityInfo:"",channels:[],userGradeAll:"",userTagsAll:"",userTags:[],userGrade:[],couponForm:""}},activated:function(){this.activityId=this.$route.params.activityId||0,this.activityType=this.$route.params.activityType||1,this.activityId?(this.inits(parseInt(this.activityId)),"2"==this.activityType&&(this.fullCoupon(parseInt(this.activityId)),console.log(this.couponForm))):this.$router.push({name:"activity"})},watch:{activityId:function(t,a){t||this.$router.push({name:"activity"})}},filters:{formatDate:function(t){var a=new Date(t);return Object(i.a)(a,"yyyy-MM-dd hh:mm:ss")}},components:{},methods:{inits:function(t){var a=this;this.$nextTick(function(){o.a.activity.info(t).then(function(t){var e=t.data;e&&0===e.code?a.activityInfo=e.data:a.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"warning",showClose:!1,callback:function(t){a.$router.push({name:"activity"})}})}).catch(function(){})})},fullCoupon:function(t){var a=this;o.a.activity.fullCoupon(t).then(function(t){var e=t.data;e&&0===e.code&&(a.couponForm=e.data,a.$nextTick(function(){a.getChannels(),a.getMemberTags(),a.getMemberLevels()}))}).catch(function(){})},getMemberLevels:function(){var t=this;o.a.activity.memberLevels().then(function(a){var e=a.data;e&&0===e.code&&(t.userGradeAll=e.memberLevels,t.couponForm.userGradeList.forEach(function(a){var e=t.$lodash.find(t.userGradeAll,["id",a+""]);t.userGrade.push(e.name)}))}).catch(function(){})},getMemberTags:function(){var t=this;o.a.activity.memberTags().then(function(a){var e=a.data;e&&0===e.code&&(t.userTagsAll=e.memberTags,t.couponForm.userTagsList.forEach(function(a){t.userTags.push(t.$lodash.find(t.userTagsAll,["id",a+""]))}))}).catch(function(){})},getChannels:function(){var t=this;o.a.activity.channels().then(function(a){var e=a.data;e&&0===e.code&&(t.channels=e.channelList)}).catch(function(){})}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mod-info"},[e("div",{staticClass:"el-cardheader"},[e("span",[t._v("活动详情")]),t._v(" "),e("router-link",{staticClass:"el-button el-button--primary el-button--small",attrs:{to:{name:"activity"}}},[t._v("返回活动管理")])],1),t._v(" "),e("el-row",{staticClass:"pt_20",attrs:{gutter:20}},[e("el-col",{attrs:{span:13}},[e("ul",{staticClass:"activity-list"},[e("li",[e("span",[t._v("活动名称：")]),t._v(t._s(t.activityInfo.activityName))]),t._v(" "),e("li",[e("span",[t._v("提报时间：")]),t._v(t._s(t._f("formatDate")(t.activityInfo.reportStartTime))+"—"+t._s(t._f("formatDate")(t.activityInfo.reportEndTime)))]),t._v(" "),e("li",[e("span",[t._v("活动时间：")]),t._v(t._s(t._f("formatDate")(t.activityInfo.activityStartTime))+"—"+t._s(t._f("formatDate")(t.activityInfo.activityEndTime)))]),t._v(" "),"2"==t.activityType?[e("li",[e("span",[t._v("促销类型：")]),t._v("全场优惠券")]),t._v(" "),e("li",[e("span",[t._v("促销信息：")]),t._v(t._s(t.couponForm.info))])]:t._e()],2)])],1),t._v(" "),e("el-row",{staticClass:"pt_20 pb_20"},[5!=t.activityInfo.status?e("router-link",{staticClass:"el-button el-button--success el-button--small",attrs:{to:{name:"intentionCreate",params:{activityId:t.activityInfo.activityId,activityType:t.activityType}}}},[t._v("修改活动")]):t._e(),t._v(" "),1<t.activityInfo.status<5?e("router-link",{staticClass:"el-button el-button--success el-button--small",attrs:{to:{name:"activity"}}},[t._v("商品管理")]):t._e()],1),t._v(" "),e("el-tabs",{staticClass:"card-box",attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"活动介绍"}},[e("div",{staticClass:"card-info",domProps:{innerHTML:t._s(t.activityInfo.activityInfo?t.activityInfo.activityInfo:"")}})]),t._v(" "),e("el-tab-pane",{attrs:{label:"活动协议"}},[e("div",{staticClass:"card-info",domProps:{innerHTML:t._s(t.activityInfo.activityAgreement?t.activityInfo.activityAgreement:"")}})]),t._v(" "),"2"==t.activityType?e("el-tab-pane",{attrs:{label:"促销信息"}},[t.couponForm?e("el-form",{ref:"couponForm",staticClass:"dataForm",attrs:{model:t.couponForm,"label-position":"right","label-width":"150px",size:"mini"}},[e("el-form-item",{attrs:{label:"优惠券名称"}},[t._v(t._s(t.couponForm.name))]),t._v(" "),e("el-form-item",{attrs:{label:"有效时间"}},[t._v(t._s(t._f("formatDate")(t.couponForm.effectStartTime))+"—"+t._s(t._f("formatDate")(t.couponForm.effectEndTime)))]),t._v(" "),e("el-form-item",{attrs:{label:"提报时间"}},[t._v(t._s(t._f("formatDate")(t.activityInfo.reportStartTime))+"—"+t._s(t._f("formatDate")(t.activityInfo.reportEndTime)))]),t._v(" "),e("el-form-item",{attrs:{label:"参与店铺"}},[t._v("\n          "+t._s("1"==t.activityInfo.shopLimit?"全部店铺":"2"==t.activityInfo.shopLimit?"查看允许参与的店铺":"查看排除的店铺")+"\n          "),t.activityInfo.shopLimit>1?e("div",{staticClass:"shopbox"},t._l(t.activityInfo.shopLimits,function(a){return e("p",{key:a.index,staticClass:"tag-p"},[e("el-tag",{attrs:{color:"transparent",closable:!1,hit:""}},[t._v(t._s(a.shopName))])],1)})):t._e()]),t._v(" "),e("el-form-item",{attrs:{label:"使用条件"}},[t._v("同一笔订单中，指定商品金额满"+t._s(t.couponForm.conAmount/100)+"元可用")]),t._v(" "),e("el-form-item",{attrs:{label:"优惠金额"}},["1"==t.couponForm.type?[t._v("\n            订单价格优惠"+t._s(t.couponForm.amount/100)+"元\n          ")]:[t._v("\n            订单价格"+t._s(t.couponForm.discount)+"折扣优惠\n          ")]],2),t._v(" "),e("el-form-item",{attrs:{label:"优惠券可领取"}},[t._v(t._s("1"==t.couponForm.obtained?"可领取":"不可领取"))]),t._v(" "),t.couponForm.obtained?e("el-form-item",{attrs:{label:"领取时间"}},[t._v("\n          "+t._s(t._f("formatDate")(t.couponForm.obtainStartTime))+"—"+t._s(t._f("formatDate")(t.couponForm.obtainEndTime))+"\n        ")]):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"用户最多拥有数量"}},[t._v(t._s(t.couponForm.limitNum))]),t._v(" "),e("el-form-item",{attrs:{label:"会员等级"}},["1"==t.couponForm.userLevelType?[t._v("\n            会员等级（"+t._s(t.userGrade.join())+"）\n          ")]:[t._v("\n            会员标签\n            "),e("div",{staticClass:"shopbox"},t._l(t.userTags,function(a){return e("p",{key:a.index,staticClass:"tag-p"},[e("el-tag",{attrs:{color:"transparent",closable:!1,hit:""}},[t._v(t._s(a.name))])],1)}))]],2),t._v(" "),e("el-form-item",{attrs:{label:"限制手机用户使用"}},[t._v(t._s(t.couponForm.phoneLimited?"是":"否"))]),t._v(" "),e("el-form-item",{attrs:{label:"限制用户首单使用"}},[t._v(t._s("1"==t.couponForm.firstOrderType?"限制店铺首单":"2"==t.couponForm.firstOrderType?"限制平台首单":"否"))]),t._v(" "),e("el-form-item",{attrs:{label:"限制设备首单使用"}},[t._v(t._s(t.couponForm.firstDeviceLimited?"是":"否"))]),t._v(" "),e("el-form-item",{attrs:{label:"可使用活动渠道"}},[e("el-checkbox-group",{model:{value:t.couponForm.channelList,callback:function(a){t.$set(t.couponForm,"channelList",a)},expression:"couponForm.channelList"}},t._l(t.channels,function(a){return e("el-checkbox",{key:a.id,attrs:{label:parseInt(a.id),disabled:""}},[t._v(t._s(a.name))])}))],1),t._v(" "),e("el-form-item",{attrs:{label:"发券方"}},[t._v(t._s(t.couponForm.couponDepartment?t.couponForm.couponDepartment:"无"))]),t._v(" "),e("el-form-item",{attrs:{label:"备注"}},[t._v(t._s(t.couponForm.remark?t.couponForm.remark:"无"))]),t._v(" "),e("el-form-item",{attrs:{label:"优惠券规则描述"}},[t._v(t._s(t.couponForm.info?t.couponForm.info:"无"))]),t._v(" "),e("el-form-item",{attrs:{label:"优惠券号前缀"}},[t._v(t._s(t.couponForm.prefix?t.couponForm.prefix:"无"))])],1):e("div",{staticClass:"noCoupon"},[t._v("\n        该活动暂无促销信息，请进行优惠券配置\n      ")])],1):t._e()],1)],1)},staticRenderFns:[]};var r=e("VU/8")(n,s,!1,function(t){e("WVm5")},"data-v-055f1f72",null);a.default=r.exports},WVm5:function(t,a,e){var o=e("DNb6");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("64e4a56e",o,!0)}});
webpackJsonp([1],{"+cDb":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.upload-container .editor-slide-upload[data-v-9756b0f8] {\n  margin-bottom: 20px;\n}\n.upload-container .el-dialog__header[data-v-9756b0f8] {\n  padding: 0;\n  margin-bottom: 0;\n}\n.editor-slide-upload[data-v-9756b0f8] {\n  padding-bottom: 10px;\n}\n.op[data-v-9756b0f8] {\n  text-align: right;\n}\n",""])},"/vHR":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.avatar-uploader {\n  position: relative;\n  width: 148px;\n  height: 148px;\n}\n.avatar-uploader .el-upload--picture-card {\n    position: relative;\n}\n.avatar-uploader .avatar {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 1;\n    width: 146px;\n    height: 146px;\n    border-radius: 6px;\n    display: block;\n}\n.avatar-uploader .el-upload-layer {\n    position: absolute;\n    left: 1px;\n    top: 1px;\n    z-index: 3;\n    display: none;\n    width: 146px;\n    height: 146px;\n    color: #fff;\n    font-size: 20px;\n    text-align: center;\n    line-height: 146px;\n    border-radius: 6px;\n    background: rgba(0, 0, 0, 0.5);\n}\n.avatar-uploader .el-upload-layer i {\n      cursor: pointer;\n}\n.avatar-uploader:hover .el-upload-layer {\n    display: block;\n}\n",""])},"1hqJ":function(t,e,i){var a=i("VnPp");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("8d3d00a4",a,!0)},"6qnF":function(t,e,i){var a=i("w/u2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("b2cff6f0",a,!0)},"74zA":function(t,e,i){var a=i("/vHR");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("76ac6932",a,!0)},Cdx3:function(t,e,i){var a=i("sB3e"),s=i("lktj");i("uqUo")("keys",function(){return function(t){return s(a(t))}})},QVGu:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n[role="group"] .el-icon-caret-right:before {\n  content: " ";\n  padding-left: 10px;\n}\n',""])},VnPp:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-upload-list[data-v-411ebc29] {\n  padding-top: 10px;\n}\n.el-upload-list__item[data-v-411ebc29] {\n  margin-top: 0;\n  line-height: 20px;\n}\n.el-upload__tip[data-v-411ebc29] {\n  margin-top: 0;\n  line-height: 20px;\n}\n.el-upload-list__item-name[data-v-411ebc29] {\n  display: inline-block;\n  position: relative;\n  padding-right: 40px;\n}\n.el-upload-list__item-name label[data-v-411ebc29] {\n    top: 2px;\n}\n.el-upload-list__item-name .el-icon-upload-success[data-v-411ebc29] {\n    color: #67c23a;\n}\n.el-upload-list__item-name .el-icon-close[data-v-411ebc29] {\n    top: 2px;\n}\n",""])},dOvt:function(t,e,i){var a=i("yUGT");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("6464dcab",a,!0)},fZjL:function(t,e,i){t.exports={default:i("jFbC"),__esModule:!0}},jFbC:function(t,e,i){i("Cdx3"),t.exports=i("FeBl").Object.keys},nNEb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),n=i("gyMJ"),o={name:"tree-list",props:{treeData:{type:Array},disabled:{type:Boolean}},data:function(){return{defaultData:[],defaultProps:{label:"catbackName",children:[]},menuIdList:[]}},activated:function(){},methods:{handleCheckChange:function(t,e,i){this.defaultData=this.treeData.map(function(t){return t.catbackId}),this.getCheckedNodes()},handleNodeClick:function(t){},getCheckedNodes:function(){this.menuIdList=[].concat(this.$refs.treelist.getCheckedNodes(),this.$refs.treelist.getHalfCheckedNodes()),this.$emit("getCatbackLimits",this.menuIdList)},loadNode:function(t,e){if(0===t.level&&(this.initTreeList(0,e),this.defaultData=this.treeData.map(function(t){return t.catbackId})),1!==t.level)return e([]);this.$refs.treelist.setChecked(t.data.catbackId,!1),this.initTreeList(t.data.catbackId,e)},initTreeList:function(t,e){var i={parentId:t||0};n.a.activity.catbacklist(i).then(function(t){var i=t.data;e(i.list)}).catch(function(){})}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("el-tree",{ref:"treelist",attrs:{setdate:this.treeData,"node-key":"catbackId",props:this.defaultProps,"default-checked-keys":this.defaultData,load:this.loadNode,lazy:"","show-checkbox":""},on:{"check-change":this.handleCheckChange}})},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(t){i("s5h5")},null,null).exports,c=i("zfz+"),u=i("//Fk"),d=i.n(u),m=i("fZjL"),p=i.n(m),h={name:"editorSlideUpload",props:{color:{type:String,default:"#1890ff"},disabled:{type:Boolean,default:!1},imagesize:{type:Number,default:500}},data:function(){return{dialogVisible:!1,listObj:{},url:"",fileList:[]}},activated:function(){this.url=n.a.oss.upload(this.$cookie.get("token"))},methods:{checkAllSuccess:function(){var t=this;return p()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=p()(this.listObj).map(function(e){return t.listObj[e]});console.log(e),this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("出现未知问题，请刷新页面重新上传，或者联系程序员！")},handleError:function(t,e,i){this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,a=p()(this.listObj),s=0,n=a.length;s<n;s++)if(this.listObj[a[s]].uid===i)return this.listObj[a[s]].url=t.url,void(this.listObj[a[s]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=p()(this.listObj),a=0,s=i.length;a<s;a++)if(this.listObj[i[a]].uid===e)return void delete this.listObj[i[a]]},beforeUpload:function(t){var e=this,i=t.size/1024<=this.imagesize;if(i){var a=window.URL||window.webkitURL,s=t.uid;return this.listObj[s]={},new d.a(function(i,n){var o=new Image;o.src=a.createObjectURL(t),o.onload=function(){e.listObj[s]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},i(!0)})}return this.$message.error("每张图片大小不大于"+this.imagesize+"KB，请调整后重新上传"),i}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",disabled:t.disabled,type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{action:t.url,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":t.handleRemove,"on-error":t.handleError,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("div",{staticClass:"op"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var v=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker  tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],g=["bold italic underline strikethrough alignleft aligncenter  alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap\tpreview anchor pagebreak fullscreen insertdatetime media table emoticons forecolor backcolor"],b={name:"tinymce",components:{editorImage:i("VU/8")(h,f,!1,function(t){i("xZl5")},"data-v-9756b0f8",null).exports},props:{id:{type:String},ImagesUploadUrl:{type:String,required:!1},value:{type:String,default:""},disabled:{type:Boolean},imagesize:{type:Number,default:500},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,readonly:"",tinymceId:this.id||"vue-tinymce-"+ +new Date}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t)})}},activated:function(){},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;e.readonly=e.disabled,window.tinymce.init({selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,language_url:"/static/tinymce/langs/zh_CN.js",toolbar:this.toolbar.length>0?this.toolbar:g,menubar:this.menubar,plugins:v,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,readonly:e.readonly,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(t,e,i){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var e=this.files[0];console.log(e);var i=new FileReader;i.onload=function(){var a="blobid"+(new Date).getTime(),s=tinymce.activeEditor.editorUpload.blobCache,n=i.result.split(",")[1],o=s.create(a,e,n);s.add(o),console.log(o),console.log(o.blobUri()),t(o.blobUri())},i.readAsDataURL(e)},a.click()}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff",disabled:this.disabled,imagesize:this.imagesize},on:{successCBK:this.imageSuccessCBK}})],1)])},staticRenderFns:[]};var _=i("VU/8")(b,y,!1,function(t){i("dOvt")},"data-v-731676da",null).exports,k={name:"upload-file",props:{action:{type:String,required:!0},disabled:{type:Boolean,default:!0},size:{type:Number,default:10},uploadList:{type:Array,default:[]},limit:{type:Number,default:5}},data:function(){return{sortNum:0}},components:{},methods:{beforeUpload:function(t){var e=-1!=["pdf","ppt","xls","xlsx","doc","docx","rar","zip"].indexOf(this.$lodash.last(t.name.split("."))),i=t.size/1024/1024<=this.size,a=this.uploadList.length<this.limit;return a||this.$alert("最多上传"+this.limit+"个附件","提示",{confirmButtonText:"确定",type:"warning",showClose:!1}),e||this.$alert("上传附件只能是pdf/ppt/xls/xlsx/doc/docx/rar/zip格式!","提示",{confirmButtonText:"确定",type:"warning",showClose:!1}),i||this.$alert("文件过大，请调整后重新上传","提示",{confirmButtonText:"确定",type:"warning",showClose:!1}),e&&i&&a},handleSuccess:function(t,e,i){this.uploadList.push({attachName:e.name,attachSort:this.sortNum++,attachUrl:e.response.url})},handleRemove:function(t){var e=this.$lodash.sortedIndexBy(this.uploadList,{attachSort:t.target.dataset.uid},"attachSort");this.uploadList.splice(e,1)},handleError:function(t,e,i){console.log(t),this.$message("出现未知问题，请刷新页面重新上传，或者联系程序员！")}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.action,limit:t.limit,"show-file-list":!1,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,"on-error":t.handleError}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:t.disabled}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传doc/docx/zip/rar/xlsx/xls文件，且不超过"+t._s(t.size)+"MB")])],1),t._v(" "),t.uploadList.length>0?i("ul",{staticClass:"el-upload-list el-upload-list--text"},t._l(t.uploadList,function(e){return i("li",{key:e.attachSort,staticClass:"el-upload-list__item is-success",attrs:{tabindex:"0"}},[i("a",{staticClass:"el-upload-list__item-name"},[i("i",{staticClass:"el-icon-document"}),t._v(t._s(e.attachName)+"\n        "),t._m(0,!0),t._v(" "),t.disabled?t._e():i("i",{staticClass:"el-icon-close",attrs:{"data-uid":e.attachSort},on:{click:t.handleRemove}})])])})):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"el-upload-list__item-status-label"},[e("i",{staticClass:"el-icon-upload-success el-icon-circle-check"})])}]};var F=i("VU/8")(k,x,!1,function(t){i("1hqJ")},"data-v-411ebc29",null).exports,C={name:"UploadsingleImage",props:{action:{type:String,required:!0},disabled:{type:Boolean,default:!1},size:{type:Number,default:10},uploadimg:{type:String,default:""}},data:function(){return{showFlag:!1,status:"exception",progressing:0,time:3,imgurl:""}},components:{},watch:{uploadimg:function(t){this.imgurl=this.uploadimg}},activated:function(){this.imgurl=this.uploadimg},mounted:function(){this.imgurl=this.uploadimg},methods:{beforeUpload:function(t){var e=-1!=["png","jpeg","jpg","gif","svg"].indexOf(this.$lodash.last(t.name.split("."))),i=t.size/1024<=this.size;return e||this.$alert("上传附件只能是jpg/png/gif/jpeg/svg格式!","提示",{confirmButtonText:"确定",type:"warning",showClose:!1}),i||this.$alert("图片过大，请调整后重新上传","提示",{confirmButtonText:"确定",type:"warning",showClose:!1}),e&&i},handleProgress:function(t,e){var i=this;i.showFlag=!0,clearInterval(this.time),this.time=setInterval(function(){i.progressing<100&&(i.progressing+=10)},500)},handleSuccess:function(t,e){this.progressing=100,clearInterval(this.time),this.status="success";var i=this;setTimeout(function(){i.showFlag=!1},2e3),this.$nextTick(function(){i.imgurl=t.url,i.$emit("getImgUrl",t.url)})},handleError:function(t,e){var i=this;clearInterval(this.time),this.status="exception",this.$alert("出现未知问题，请刷新页面重新上传","提示",{confirmButtonText:"确定",type:"warning",showClose:!1,callback:function(t){i.$router.go(0)}})},handleRemove:function(t){var e=this;this.$nextTick(function(){e.imgurl="",e.$emit("getImgUrl","")})}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:t.disabled,action:t.action,"list-type":"picture-card","show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"on-error":t.handleError,"on-progress":t.handleProgress}},[t.imgurl?i("img",{staticClass:"avatar",attrs:{src:t.imgurl}}):t._e(),t._v(" "),i("i",{staticClass:"el-icon-plus"}),t._v(" "),t.imgurl&&!t.disabled?i("div",{staticClass:"el-upload-layer",attrs:{slot:"tip"},slot:"tip"},[i("i",{staticClass:"el-icon-delete",on:{click:t.handleRemove}})]):t._e(),t._v(" "),i("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],attrs:{type:"circle",percentage:t.progressing,"stroke-width":2}})],1),t._v(" "),i("div",{staticClass:"el-upload__tip"},[t._v("只能上传jpg/png/gif/jpeg/svg文件，且不超过"+t._s(t.size)+"KB")])],1)},staticRenderFns:[]};var L=i("VU/8")(C,T,!1,function(t){i("6qnF")},"data-v-8fbb4154",null).exports,I={activityName:"",activityTime:"",reportTime:"",catbackLimit:0,catbackLimits:[],shopLimit:0,shopLimits:[],smallTag:"",bigTag:"",activityInfo:"",activityAgreement:"",attachs:[],status:0},w={data:function(){return{ruleForm:s()({},I),activityId:0,activityType:1,umpPlatCouponId:"",shopListVisible:!1,url:"",Change:!1,preForm:{},rules:{activityName:[{required:!0,message:"请填写活动名称",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 25 个字符",trigger:"blur"}],activityTime:[{required:!0,message:"请选择活动时间",trigger:"change"}],reportTime:[{required:!0,message:"请选择提报时间",trigger:"change"}],catbackLimit:[{required:!0,message:"请选择品类范围",trigger:"change"}],shopLimit:[{required:!0,message:"请选择店铺范围",trigger:"change"}],activityAgreement:[{required:!0,message:"请填写活动协议",trigger:"change"}],activityInfo:[{required:!0,message:"请填写活动介绍",trigger:"change"}]}}},components:{TreeList:l,ShopList:c.default,Tinymce:_,UploadFile:F,UploadsingleImage:L},computed:{},activated:function(){this.activityId=this.$route.params.activityId||0,this.activityType=this.$route.params.activityType||1,console.log(this.activityId,this.activityType),this.inits(parseInt(this.activityId))},deactivated:function(){this.resetForm("ruleForm")},watch:{ruleForm:{handler:function(t,e){for(var i in this.ruleForm)t[i]!=this.preForm[i]?this.Change=!0:this.Change=!1},deep:!0}},methods:{inits:function(t){var e=this;this.activityId=t||0,this.$nextTick(function(){e.url=n.a.oss.upload(e.$cookie.get("token")),t?n.a.activity.info(e.activityId).then(function(t){var i=t.data;if(i&&0===i.code){var a=i.data,n={activityName:a.activityName,activityTime:[a.activityStartTime,a.activityEndTime],reportTime:[a.reportStartTime,a.reportEndTime],catbackLimit:a.catbackLimit,catbackLimits:a.catbackLimits,shopLimit:a.shopLimit,shopLimits:a.shopLimits,smallTag:a.smallTag,bigTag:a.bigTag,activityInfo:a.activityInfo,activityAgreement:a.activityAgreement,attachs:a.attachs?a.attachs:[],status:a.status};e.umpPlatCouponId=a.umpPlatCouponId,e.ruleForm=s()({},n),e.$nextTick(function(){e.$refs.infoEditor.initTinymce(),e.$refs.agreementEditor.initTinymce()})}else e.$alert(i.msg,"提示",{confirmButtonText:"确定",type:"warning",showClose:!1,callback:function(t){e.$router.push({name:"activity"})}})},function(t){}).catch(function(){}):(e.ruleForm=s()({},I),e.$nextTick(function(){e.$refs.infoEditor.initTinymce(),e.$refs.agreementEditor.initTinymce()}))})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var i={activityName:e.ruleForm.activityName,activityType:e.activityType,activityStartTime:e.ruleForm.activityTime[0],activityEndTime:e.ruleForm.activityTime[1],reportStartTime:e.ruleForm.reportTime[0],reportEndTime:e.ruleForm.reportTime[1],shopLimit:e.ruleForm.shopLimit,shopLimits:e.ruleForm.shopLimits,smallTag:e.ruleForm.smallTag,bigTag:e.ruleForm.bigTag,activityInfo:e.ruleForm.activityInfo,activityAgreement:e.ruleForm.activityAgreement,attachs:e.ruleForm.attachs};e.activityId&&(i.activityId=e.activityId),"1"==e.activityType&&(i.catbackLimit=e.ruleForm.catbackLimit,i.catbackLimits=e.ruleForm.catbackLimits),(e.activityId?n.a.activity.updateIntention(i):n.a.activity.addIntention(i)).then(function(t){var i=t.data;i&&0===i.code?e.$alert(e.activityId?"修改成功":"添加成功","提示",{confirmButtonText:"确定",type:"success",showClose:!1,callback:function(t){"1"==e.activityType?e.$router.push({name:"activity"}):e.activityId||e.$router.push({name:"couponCreate",params:{activityId:i.activity.activityId}})}}):e.$alert(i.msg,"提示",{confirmButtonText:"确定",type:"warning",showClose:!1})}).catch(function(){})})},resetForm:function(t){this.$refs[t].resetFields()},cancelTips:function(){console.log("数据是否有改变",this.Change)},getCatbackLimits:function(t){this.ruleForm.catbackLimits=t},getShopLimits:function(t){this.ruleForm.shopLimits=t},handleClose:function(t){this.ruleForm.shopLimits.splice(this.ruleForm.shopLimits.indexOf(t),1)},addOrUpdateShopLimit:function(t){var e=this;this.shopListVisible=!0,this.$nextTick(function(){e.$refs.ShopList.checkdataList=e.ruleForm.shopLimits,e.$refs.ShopList.init()})},getSmallTag:function(t){this.ruleForm.smallTag=t},getBigTag:function(t){this.ruleForm.bigTag=t}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mod-create"},[i("div",{staticClass:"el-cardheader"},[i("span",[t._v(t._s(0!=t.activityId?"修改活动":"创建活动"))])]),t._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"活动名称",prop:"activityName"}},[i("el-input",{staticClass:"input_small",attrs:{disabled:!(t.ruleForm.status<4)},model:{value:t.ruleForm.activityName,callback:function(e){t.$set(t.ruleForm,"activityName",e)},expression:"ruleForm.activityName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"活动类型"}},[t._v(t._s("1"==t.activityType?"意向收集":"促销活动-全场优惠券"))]),t._v(" "),i("el-form-item",{attrs:{label:"活动时间",prop:"activityTime"}},[i("el-date-picker",{attrs:{readonly:!(t.ruleForm.status<4),type:"datetimerange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.ruleForm.activityTime,callback:function(e){t.$set(t.ruleForm,"activityTime",e)},expression:"ruleForm.activityTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"提报时间",prop:"reportTime"}},[i("el-date-picker",{attrs:{readonly:!(t.ruleForm.status<4),type:"datetimerange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.ruleForm.reportTime,callback:function(e){t.$set(t.ruleForm,"reportTime",e)},expression:"ruleForm.reportTime"}})],1),t._v(" "),"1"==t.activityType?[i("el-form-item",{attrs:{label:"品类范围",prop:"catbackLimit"}},[i("el-radio-group",{attrs:{disabled:t.ruleForm.status>1},model:{value:t.ruleForm.catbackLimit,callback:function(e){t.$set(t.ruleForm,"catbackLimit",e)},expression:"ruleForm.catbackLimit"}},[i("el-radio",{attrs:{label:1}},[t._v("全部品类")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("限定品类")]),t._v(" "),i("el-radio",{attrs:{label:3}},[t._v("排除品类")])],1)],1),t._v(" "),t.ruleForm.catbackLimit>1?i("el-form-item",{attrs:{label:"选择分类",prop:"catbackLimits"}},[t.ruleForm.status>1?i("i",{staticClass:"catbackMask"}):t._e(),t._v(" "),i("div",{staticClass:"catbackbox",class:"3"==t.ruleForm.catbackLimit?"rightShow":""},[i("tree-list",{ref:"tree",attrs:{treeData:t.ruleForm.catbackLimits},on:{getCatbackLimits:t.getCatbackLimits}})],1)]):t._e()]:t._e(),t._v(" "),i("el-form-item",{attrs:{label:"店铺范围",prop:"shopLimit"}},[i("el-radio-group",{attrs:{disabled:t.ruleForm.status>1},model:{value:t.ruleForm.shopLimit,callback:function(e){t.$set(t.ruleForm,"shopLimit",e)},expression:"ruleForm.shopLimit"}},[i("el-radio",{attrs:{label:1}},[t._v("全部店铺")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("限定店铺")]),t._v(" "),i("el-radio",{attrs:{label:3}},[t._v("排除店铺")])],1)],1),t._v(" "),t.ruleForm.shopLimit>1?i("el-form-item",{attrs:{prop:"shopLimits"}},[i("div",{staticClass:"shopLimits",class:"3"==t.ruleForm.shopLimit?"rightShow":""},[i("el-button",{attrs:{size:"medium",type:"text",disabled:t.ruleForm.status>1},on:{click:function(e){t.addOrUpdateShopLimit()}}},[t._v(t._s(0!=t.activityId?"修改店铺":"添加店铺"))]),t._v(" "),t._l(t.ruleForm.shopLimits,function(e){return i("p",{key:e.index,staticClass:"tag-p"},[i("el-tag",{attrs:{color:"transparent",closable:!(t.ruleForm.status>1),hit:""},on:{close:function(i){t.handleClose(e)}}},[t._v(t._s(e.shopName))])],1)})],2),t._v(" "),t.shopListVisible?i("shop-list",{ref:"ShopList",attrs:{defaultData:t.ruleForm.shopLimits},on:{refreshDataList:t.getShopLimits}}):t._e()],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"活动标签"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[t._v("\n          小标签\n          "),i("UploadsingleImage",{attrs:{action:t.url,disabled:5==t.ruleForm.status,uploadimg:t.ruleForm.smallTag,size:50},on:{getImgUrl:t.getSmallTag}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[t._v("\n          商品主图角标\n          "),i("UploadsingleImage",{attrs:{action:t.url,disabled:5==t.ruleForm.status,uploadimg:t.ruleForm.bigTag,size:50},on:{getImgUrl:t.getBigTag}})],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动介绍",prop:"activityInfo"}},[i("tinymce",{ref:"infoEditor",attrs:{height:300,disabled:t.ruleForm.status>2,id:"activityInfo",ImagesUploadUrl:t.url,Imagesize:500},model:{value:t.ruleForm.activityInfo,callback:function(e){t.$set(t.ruleForm,"activityInfo",e)},expression:"ruleForm.activityInfo"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"活动协议",prop:"activityAgreement"}},[i("tinymce",{ref:"agreementEditor",attrs:{height:300,disabled:t.ruleForm.status>2,id:"activityAgreement",Imagesize:500},model:{value:t.ruleForm.activityAgreement,callback:function(e){t.$set(t.ruleForm,"activityAgreement",e)},expression:"ruleForm.activityAgreement"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"附件",prop:"attachs"}},[i("upload-file",{attrs:{action:t.url,disabled:t.ruleForm.status>2,uploadList:t.ruleForm.attachs,size:10}})],1),t._v(" "),i("el-form-item",{staticClass:"form-btn-op"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v(t._s(0!=t.activityId?"保存":"1"==t.activityType?"完成":"下一步"))]),t._v(" "),"2"==t.activityType&&"0"!=t.activityId?i("router-link",{staticClass:"el-button el-button--default",attrs:{to:{name:"couponCreate",params:{activityId:this.activityId,umpPlatCouponId:this.umpPlatCouponId,status:this.ruleForm.status}}}},[t._v("修改优惠券配置")]):t._e(),t._v(" "),"0"==t.activityId?i("el-button",{on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("重置")]):t._e(),t._v(" "),"0"!=t.activityId?i("el-button",{on:{click:t.cancelTips}},[t._v("取消")]):t._e(),t._v(" "),"0"==t.activityId?i("router-link",{staticClass:"el-button el-button--default",attrs:{to:{name:"ActivityCreate"}}},[t._v("返回")]):t._e()],1)],2)],1)},staticRenderFns:[]};var S=i("VU/8")(w,$,!1,function(t){i("74zA")},null,null);e.default=S.exports},s5h5:function(t,e,i){var a=i("QVGu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("270417d9",a,!0)},uqUo:function(t,e,i){var a=i("kM2E"),s=i("FeBl"),n=i("S82l");t.exports=function(t,e){var i=(s.Object||{})[t]||Object[t],o={};o[t]=e(i),a(a.S+a.F*n(function(){i(1)}),"Object",o)}},"w/u2":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-upload-list__item-name[data-v-8fbb4154] {\n  display: inline-block;\n  position: relative;\n  padding-right: 40px;\n}\n.el-upload-list__item-name label[data-v-8fbb4154] {\n    top: 2px;\n}\n.el-upload-list__item-name .el-icon-upload-success[data-v-8fbb4154] {\n    color: #67c23a;\n}\n.el-upload-list__item-name .el-icon-close[data-v-8fbb4154] {\n    top: 2px;\n}\n.el-progress--circle[data-v-8fbb4154] {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n  z-index: 5;\n}\n.el-progress__text[data-v-8fbb4154] {\n  color: #67c23a !important;\n}\n",""])},xZl5:function(t,e,i){var a=i("+cDb");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("2d282cb6",a,!0)},yUGT:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.tinymce-container[data-v-731676da] {\n  position: relative;\n}\n.tinymce-container[data-v-731676da] .mce-fullscreen {\n  z-index: 10000;\n}\n.mce-container[data-v-731676da] {\n  display: block !important;\n}\n.tinymce-textarea[data-v-731676da] {\n  visibility: hidden;\n  z-index: 1;\n}\n.editor-custom-btn-container[data-v-731676da] {\n  position: absolute;\n  right: 2px;\n  top: -2px;\n  /*z-index: 2005;*/\n}\n.editor-upload-btn[data-v-731676da] {\n  display: inline-block;\n}\n",""])}});